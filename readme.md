# インフラ構成表

## VPC & サブネット

| リソース         | サブネット / 説明    | CIDR               | 関連 |
|------------------|---------------------|--------------------|------|
| `aws_vpc.main`    | VPC                 | `10.0.0.0/16`      | -    |
| `aws_subnet.public_1a` | 公開サブネット (1a)   | `10.0.1.0/24`      | 公開用のルートテーブルに接続 |
| `aws_subnet.private_1a`| 非公開サブネット (1a)  | `10.0.2.0/24`      | RDS接続や内部通信に使用 |
| `aws_subnet.public_1c`| 公開サブネット (1c)   | `10.0.3.0/24`      | 公開用のルートテーブルに接続 |
| `aws_subnet.private_1c`| 非公開サブネット (1c)  | `10.0.4.0/24`      | 内部通信用、RDSと接続 |

## セキュリティグループ

| リソース                    | 関連サブネット            | インバウンドルール             | アウトバウンドルール         |
|-----------------------------|--------------------------|------------------------------|----------------------------|
| `aws_security_group.public_sg` | 公開サブネット            | SSH, HTTP, HTTPS             | 全てのアウトバウンド許可     |
| `aws_security_group.private_sg`| 非公開サブネット          | 公開サブネットからの通信許可  | 全てのアウトバウンド許可     |
| `aws_security_group.alb_sg`   | ALB (ロードバランサー)  | HTTP, HTTPS                  | 全てのアウトバウンド許可     |
| `aws_security_group.rds_sg`   | RDS (データベース)       | 非公開サブネットからのMySQLアクセス許可 | 全てのアウトバウンド許可 |

## ターゲットグループ

| リソース                        | 対応サブネット / セキュリティグループ | プロトコル | ポート | 用途                   |
|---------------------------------|----------------------------------|------------|-------|------------------------|
| `aws_lb_target_group.web_tg`    | 公開サブネット + `aws_security_group.alb_sg` | HTTP       | 80    | アプリケーション用ターゲット |
